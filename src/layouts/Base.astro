---
import "@unocss/reset/tailwind.css";
import "uno.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

interface Props {
  title: string;
  description?: string;
}

const { title, description = "Curated open-source plugin marketplace for Claude Code" } = Astro.props;
const fullTitle = `${title} — Claude Code Plugins | skill7`;
const canonicalUrl = new URL(Astro.url.pathname, Astro.site ?? Astro.url.origin).href;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{fullTitle}</title>
    <link rel="canonical" href={canonicalUrl} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="theme-color" content="#080c18" />

    <!-- Google Fonts: Geist (heading), Inter (body), Geist Mono (code) -->
    <!-- Note: Geist is available via Vercel's CDN or via npm @vercel/font  -->
    <!-- Fallback chain uses Space Grotesk which IS on Google Fonts          -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:site_name" content="skill7" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />

    <slot name="head" />
  </head>
  <body class="min-h-screen bg-dark-bg text-dark-hi antialiased font-body">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 focus:z-99 focus:px-4 focus:py-2 focus:bg-acid focus:text-dark-bg focus:rounded-lg focus:font-medium focus:text-sm">
      Skip to content
    </a>
    <Header />
    <main id="main-content" class="page-gutter py-8">
      <slot />
    </main>
    <Footer />
  </body>
</html>

<style is:global>
  /* ── CSS Custom Properties ─────────────────────────────────────────────── */
  :root {
    /* Dark mode (default) */
    --color-bg:         #080c18;
    --color-surface:    #0f1629;
    --color-surface-2:  #161e38;
    --color-border:     #1e2a4a;
    --color-border-2:   #2a3a5e;
    --color-text-1:     #e8edf8;
    --color-text-2:     #8b9cbf;
    --color-text-muted: #7a8faa;
    --color-code-bg:    #060a14;

    --color-acid:       #00e5a0;
    --color-acid-glow:  #00ffc2;
    --color-acid-dim:   #00b37a;
    --color-acid-muted: #003d28;

    --color-cyan:       #00b4d8;
    --color-cyan-bright:#00d4ff;
    --color-cyan-muted: #002d3d;

    --color-ok:         #00c97a;
    --color-ok-bg:      #003d28;
    --color-warn:       #f5a623;
    --color-warn-bg:    #3d2800;
    --color-err:        #f0455a;
    --color-err-bg:     #3d0010;
  }

  /* Light mode override — toggle via data-theme="light" on <html> */
  [data-theme="light"] {
    --color-bg:         #f7f5f0;
    --color-surface:    #ffffff;
    --color-surface-2:  #f0ede8;
    --color-border:     #e2ddd6;
    --color-border-2:   #c8c2b8;
    --color-text-1:     #1a1612;
    --color-text-2:     #6b6059;
    --color-text-muted: #9e9389;
    --color-code-bg:    #1a1e2e;

    --color-acid:       #007a52;
    --color-acid-glow:  #009966;
    --color-acid-dim:   #006644;
    --color-acid-muted: #e8f9f2;

    --color-cyan:       #006b8a;
    --color-cyan-bright:#0088aa;
    --color-cyan-muted: #e6f4f8;

    --color-ok:         #007a52;
    --color-ok-bg:      #e8f9f2;
    --color-warn:       #a06c00;
    --color-warn-bg:    #fef3e2;
    --color-err:        #c4243a;
    --color-err-bg:     #fdeef0;
  }

  /* ── Base typography ───────────────────────────────────────────────────── */
  * {
    box-sizing: border-box;
  }

  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    background-color: var(--color-bg);
    color: var(--color-text-1);
  }

  /* Headings: Space Grotesk, tight tracking */
  h1, h2, h3, h4, h5, h6 {
    font-family: "Space Grotesk", "Geist", system-ui, sans-serif;
    font-weight: 600;
    letter-spacing: -0.025em;
    color: var(--color-text-1);
  }

  h1 { font-size: 2.25rem; line-height: 1.15;    letter-spacing: -0.04em; }
  @media (min-width: 640px) { h1 { font-size: 3rem; } }
  h2 { font-size: 1.875rem; line-height: 1.2;   letter-spacing: -0.03em; }
  h3 { font-size: 1.25rem;  line-height: 1.4;   letter-spacing: -0.015em; }

  p {
    line-height: 1.625;
    color: var(--color-text-2);
  }

  code, pre, kbd {
    font-family: "JetBrains Mono", "Geist Mono", "Fira Code", monospace;
  }

  /* ── Selection ─────────────────────────────────────────────────────────── */
  ::selection {
    background: rgba(0, 229, 160, 0.2);
    color: var(--color-text-1);
  }

  /* ── Scrollbar (dark mode) ─────────────────────────────────────────────── */
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: var(--color-bg); }
  ::-webkit-scrollbar-thumb {
    background: var(--color-border-2);
    border-radius: 4px;
  }
  ::-webkit-scrollbar-thumb:hover { background: var(--color-text-muted); }

  /* ── Hide scrollbar on inline code (copy-block) ───────────────────────── */
  .copy-block code::-webkit-scrollbar { display: none; }
  .copy-block code { scrollbar-width: none; }

  /* ── Focus ring ────────────────────────────────────────────────────────── */
  :focus-visible {
    outline: 2px solid var(--color-acid);
    outline-offset: 2px;
  }

  /* ── Dot grid background pattern ───────────────────────────────────────── */
  /* Apply .bg-dots to any section that needs the grid treatment */
  .bg-dots {
    background-image: radial-gradient(circle, var(--color-border) 1px, transparent 1px);
    background-size: 28px 28px;
  }

  /* ── Aurora gradient for hero sections ────────────────────────────────── */
  .bg-aurora {
    background: linear-gradient(
      135deg,
      #080c18 0%,
      #0d1a2e 30%,
      #0a1f1a 60%,
      #080c18 100%
    );
    background-size: 300% 300%;
    animation: aurora 10s ease-in-out infinite;
  }

  @keyframes aurora {
    0%, 100% { background-position: 0% 50%; }
    50%       { background-position: 100% 50%; }
  }

  /* ── Gradient border technique ────────────────────────────────────────── */
  /* Usage: <div class="border-gradient-acid"> */
  .border-gradient-acid {
    background:
      linear-gradient(var(--color-surface), var(--color-surface)) padding-box,
      linear-gradient(135deg, #00e5a0, #00b4d8) border-box;
    border: 1px solid transparent;
  }

  /* ── Glow pulse on accent elements ───────────────────────────────────── */
  @keyframes glow-pulse {
    0%, 100% { box-shadow: 0 0 8px 0 rgba(0, 229, 160, 0.15); }
    50%       { box-shadow: 0 0 20px 0 rgba(0, 229, 160, 0.35), 0 0 40px 0 rgba(0, 180, 216, 0.15); }
  }

  /* ── Gradient text utility ────────────────────────────────────────────── */
  .text-gradient-acid {
    background: linear-gradient(135deg, var(--color-acid) 0%, var(--color-cyan) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-hero {
    background: linear-gradient(135deg, #e8edf8 20%, #00e5a0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
</style>
